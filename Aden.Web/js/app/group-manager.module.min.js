"use strict";function deleteGroup(n){var t=n.name;console.log("delete group",t);$.ajax({url:"/api/membership/deletegroup/"+t,type:"POST",success:function(){toastr.warning("Deleted group - "+t);getUsers();listGroup.reload()},error:function(n){console.log("err",n);toastr.error("Something went wrong: "+n.responseJSON.message)}}).always(function(){})}function getUsers(n){var t=0,i,r;n!==undefined&&(t=n.id);membershipUri="/api/membership/groupmembers/"+t;i=new DevExpress.data.CustomStore({key:["identityGuid"],load:function(){return $.get(membershipUri,function(n){return n})},insert:function(){},update:function(){},remove:function(n){var i="/api/membership/groupmembers/"+t+"/"+n.identityGuid;$.ajax({url:i,processData:!1,type:"POST",success:function(){}})}});r=$("#listUsers").dxList({dataSource:i,height:555,allowItemDeleting:!0,searchEnabled:!0,searchExpr:["fullName","emailAddress"],itemTemplate:function(n){return $("<div>").append($("<span>").text(n.fullName+" - ")).append($("<span>").text(n.emailAddress))},selectionMode:"single",onSelectionChanged:function(){},onItemDeleted:function(){},showSelectionControls:!0,pageLoadMode:"scrollBottom"}).dxList("instance")}var uri="/api/membership/groups",deleteUri="/api/membership/deletegroup",membershipUri="/api/membership/group/1",groupId,listGroup=$("#listGroups").dxList({dataSource:DevExpress.data.AspNet.createStore({key:"id",loadUrl:uri,deleteUrl:deleteUri,pageSize:10,paginate:!0}),height:555,allowItemDeleting:!0,searchEnabled:!0,searchExpr:"name",itemTemplate:function(n){return $("<div>").append($("<span>").text(n.name))},selectionMode:"single",onSelectionChanged:function(){var n=listGroup.option().selectedItem;n!==undefined&&(groupId=n.id,$("#groupId").val(groupId),$("#btnAddMember").removeAttr("disabled"),getUsers(n))},onItemDeleting:function(n){deleteGroup(n.itemData);n.cancel=!0},showSelectionControls:!0,pageLoadMode:"scrollBottom"}).dxList("instance");