"use strict";$(function(){function t(){$("#panel-message").hide();n.getCombinedFilter()!==undefined&&$("#panel-message").show();$(".dx-datagrid-table").addClass("table");$(".dx-button").attr("data-toggle","tooltip");$('[data-toggle="tooltip"]').tooltip()}function i(t,i){$toggleWorkingButton(i);$.ajax({url:"/api/workitem/delete/"+t.id,type:"POST",success:function(){toastr.success("Deleted work item "+t.actionName+" for "+t.assignedUser);n.refresh()},error:function(n){toastr.error("Error deleting work item: "+n.responseJSON.message)},complete:function(){$toggleWorkingButton(i)}})}console.log("work items view ready");var n=$("#grid").dxDataGrid({dataSource:DevExpress.data.AspNet.createStore({key:"id",loadUrl:"/api/workitem/all"}),remoteOperations:!0,allowColumnResizing:!0,allowColumnReordering:!0,showBorders:!0,wordWrapEnabled:!0,"export":{enabled:!0,fileName:"FileSpecifications",allowExportSelectedData:!1,icon:"fa fa-trash"},stateStoring:{enabled:!0,type:"localStorage",storageKey:"gridFileSpecificationFilterStorage"},filterRow:{visible:!0},headerFilter:{visible:!0},groupPanel:{visible:!0},scrolling:{mode:"virtual",rowRenderingMode:"virtual"},paging:{pageSize:20},height:650,columnChooser:{enabled:!0},columnResizingMode:"nextColumn",columnMinWidth:50,columnAutoWidth:!0,columns:[{alignment:"center",width:100,cellTemplate:function(n,t){$("<a/>").addClass("btn btn-default btn-sm btn-sm-grid").text("Delete").attr("aria-label","delete work item "+t.data.id).on("dxclick",function(){i(t.data,n)}).appendTo(n)}},{dataField:"id",caption:"WorkItemId",dataType:"number"},{dataField:"fileNumber",caption:"File Number",dataType:"string"},{dataField:"displayFileName",caption:"File Name"},{dataField:"assignedUser",caption:"Assigned"},{dataField:"actionName",caption:"Action"},{dataField:"workItemStateDisplay",caption:"Work State"},{dataField:"dataYear",caption:"Data Year",width:75},{dataField:"assignedDate",caption:"Assigned",dataType:"datetime",width:150},{dataField:"dueDate",caption:"Due",dataType:"datetime",width:150}],onToolbarPreparing:function(n){var t=n.component;n.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{text:"Collapse All",width:136,onClick:function(n){var i=n.component.option("text")==="Expand All";t.option("grouping.autoExpandAll",i);n.component.option("text",i?"Collapse All":"Expand All")}}},{location:"after",widget:"dxButton",options:{icon:"refresh",hint:"Refresh",onClick:function(){t.refresh()}}},{location:"after",widget:"dxButton",options:{icon:"clearformat",hint:"Clear filters",onClick:function(){t.clearFilter()}}},{location:"after",widget:"dxButton",options:{icon:"clearsquare",hint:"Reset grid to default",onClick:function(){t.state({})}}})},onContentReady:function(){t()}}).dxDataGrid("instance")});