"use strict";$(function(){function i(){console.log("content ready");$("#panel-message").hide();t.getCombinedFilter()!==undefined&&$("#panel-message").show();$(".dx-datagrid-table").addClass("table");$(".dx-button").attr("data-toggle","tooltip");$('[data-toggle="tooltip"]').tooltip()}function r(n,t){var i=["active","success","info","warning","danger"],r=window.moment();if(t.submissionStateDisplay==="Completed"||t.submissionStateDisplay==="Waived"){n.addClass(i[1]);return}if(t.submissionStateDisplay==="CompleteWithErrors"){n.addClass(i[2]);return}if(t.submissionStateDisplay!=="Completed"&&r.isSameOrAfter(t.dueDate)){n.addClass(i[4]);return}if(t.submissionStateDisplay!=="Completed"&&r.add(14,"days").isSameOrAfter(t.dueDate)){n.addClass(i[3]);return}}console.log("file assignment report view ready");var n="/api/submission",t=$("#gridReport").dxDataGrid({dataSource:DevExpress.data.AspNet.createStore({key:"id",loadUrl:n,updateUrl:n}),remoteOperations:{paging:!0,filtering:!0,sorting:!0,grouping:!0,summary:!0,groupPaging:!0},searchPanel:{visible:!0,highlightCaseSensitive:!0},allowColumnResizing:!0,allowColumnReordering:!0,showBorders:!0,wordWrapEnabled:!0,"export":{enabled:!0,fileName:"Assignments",allowExportSelectedData:!1,icon:"fa fa-trash"},filterRow:{visible:!0},headerFilter:{visible:!0},groupPanel:{visible:!1},scrolling:{mode:"virtual",rowRenderingMode:"virtual"},paging:{pageSize:20},height:650,columnResizingMode:"nextColumn",columnMinWidth:50,columnAutoWidth:!0,columnChooser:{enabled:!0},columns:[{dataField:"fileNumber",caption:"File Number",visibleIndex:1},{dataField:"fileName",caption:"File Name",visibleIndex:2},{dataField:"section",caption:"Section",visibleIndex:8},{dataField:"submissionStateDisplay",caption:"Status",visibleIndex:9},{dataField:"dataYear",caption:"Data Year",visibleIndex:7},{dataField:"generators",caption:"Generators",dataType:"string",visible:!0,visibleIndex:11,cellTemplate:function(n,t){t.data.generators.forEach(function(t){$("<span>"+t+"<\/span><br />").appendTo(n)})},allowFiltering:!1,calculateDisplayValue:function(n){return n.generators.join(", ")}},{dataField:"approvers",caption:"Approvers",dataType:"string",visible:!0,visibleIndex:12,cellTemplate:function(n,t){t.data.approvers.forEach(function(t){$("<span>"+t+"<\/span><br />").appendTo(n)})},allowFiltering:!1,calculateDisplayValue:function(n){return n.approvers.join(", ")}}],sortByGroupSummaryInfo:[{summaryItem:"count"}],summary:{totalItems:[{column:"fileNumber",displayFormat:"{0} Submissions",summaryType:"count",showInGroupFooter:!0,showInColumn:"FileNumber"}],groupItems:[{summaryType:"count",displayFormat:"{0} Submissions"}]},onRowPrepared:function(n){n.rowType==="data"&&r(n.rowElement,n.data)},onContentReady:function(){i()},onToolbarPreparing:function(n){var t=n.component;n.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",hint:"Refresh",onClick:function(){t.refresh()}}},{location:"after",widget:"dxButton",options:{icon:"clearformat",hint:"Clear filters",onClick:function(){t.clearFilter()}}})}}).dxDataGrid("instance")});